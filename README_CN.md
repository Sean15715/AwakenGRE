# GRE "Drill Sergeant" AI Coach - æŠ€æœ¯æ–‡æ¡£

## é¡¹ç›®æ¦‚è¿°

è¿™æ˜¯ä¸€ä¸ªé«˜å¼ºåº¦çš„ GRE é˜…è¯»ç†è§£è®­ç»ƒåº”ç”¨ï¼ˆMVP ç‰ˆæœ¬ï¼‰ï¼Œé‡‡ç”¨"ä¸¥æ ¼æ•™ç»ƒ"é£æ ¼ï¼Œå¸®åŠ©å­¦ç”Ÿé€šè¿‡"æ•‘èµå¼§"(Redemption Arc) å·¥ä½œæµç†è§£é”™é¢˜åŸå› ã€‚æ ¸å¿ƒä»·å€¼åœ¨äºä¸“æ³¨å¸®åŠ©ç”¨æˆ·ç†è§£**ä¸ºä»€ä¹ˆç­”é”™**ï¼Œè€Œä¸ä»…ä»…æ˜¯æ˜¾ç¤ºæ­£ç¡®ç­”æ¡ˆã€‚

**äº§å“å®šä½**: é«˜å…±æƒ…ã€ä¸“æ³¨äº"åŸå­ä¹ æƒ¯"å¼çš„ä¸€è‡´æ€§è®­ç»ƒï¼Œç±»ä¼¼ Duolingo + Khan Academy çš„æ•™è‚²é£æ ¼ã€‚

---

## æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 19.2** (Vite æ„å»ºå·¥å…·)
- **Tailwind CSS v3.4** - å“åº”å¼è®¾è®¡ï¼Œæ·±è‰²ä¸»é¢˜
- **Lucide React** - å›¾æ ‡åº“
- **çŠ¶æ€ç®¡ç†**: React Context API (æ— éœ€ Redux)
- **æŒä¹…åŒ–å­˜å‚¨**: localStorage (MVP é˜¶æ®µ)

### åç«¯
- **Python 3.x** + **FastAPI**
- **Pydantic** - æ•°æ®éªŒè¯å’Œåºåˆ—åŒ–
- **å¼‚æ­¥å¤„ç†**: asyncio (æ”¯æŒå¹¶è¡Œ LLM è°ƒç”¨)
- **æ•°æ®å­˜å‚¨**: å†…å­˜å­—å…¸ (MVP é˜¶æ®µï¼Œæ— æ•°æ®åº“)
- **LLM é›†æˆ**: å½“å‰ä¸º Mock å‡½æ•°ï¼Œå·²é¢„ç•™ OpenAI/Anthropic API æ¥å£

### è®¾è®¡åŸåˆ™
- **ç§»åŠ¨ä¼˜å…ˆ** (Mobile-First)
- **æ·±è‰²ä¸»é¢˜** (Navy Blue + Purple é…è‰²æ–¹æ¡ˆ)
- **æ— éšœç¢è®¿é—®** (ARIA æ ‡ç­¾ï¼Œé”®ç›˜å¯¼èˆªæ”¯æŒ)

---

## é¡¹ç›®ç»“æ„

```
Repo/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ main.py              # FastAPI åº”ç”¨ + è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ schemas.py           # Pydantic æ•°æ®æ¨¡å‹ï¼ˆä¸¥æ ¼ JSON å¥‘çº¦ï¼‰
â”‚   â”œâ”€â”€ llm_service.py       # Mock LLM æœåŠ¡ï¼ˆå¾…æ›¿æ¢ä¸ºçœŸå® APIï¼‰
â”‚   â””â”€â”€ requirements.txt     # Python ä¾èµ–
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ screens/
â”‚   â”‚   â”‚   â”œâ”€â”€ HomeScreen.jsx       # é¦–é¡µï¼ˆå·²é…ç½®ç”¨æˆ·ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ SetupScreen.jsx      # åˆæ¬¡é…ç½®ç•Œé¢
â”‚   â”‚   â”‚   â”œâ”€â”€ ExamScreen.jsx       # è€ƒè¯•æ¨¡å¼ï¼ˆé™é»˜ç­”é¢˜ï¼‰
â”‚   â”‚   â”‚   â”œâ”€â”€ RedemptionScreen.jsx # é”™é¢˜è®¢æ­£å¾ªç¯
â”‚   â”‚   â”‚   â”œâ”€â”€ SummaryScreen.jsx    # æ€»ç»“ç•Œé¢
â”‚   â”‚   â”‚   â””â”€â”€ SettingsScreen.jsx   # è®¾ç½®/é‡ç½®æ•°æ®
â”‚   â”‚   â”œâ”€â”€ SessionContext.jsx       # å…¨å±€çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ api.js                   # åç«¯ API å®¢æˆ·ç«¯
â”‚   â”‚   â”œâ”€â”€ App.jsx                  # è·¯ç”±æ§åˆ¶å™¨
â”‚   â”‚   â””â”€â”€ index.css                # å…¨å±€æ ·å¼ + Tailwind
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tailwind.config.js
â”œâ”€â”€ README.md                # è‹±æ–‡æ–‡æ¡£
â”œâ”€â”€ README_CN.md             # ä¸­æ–‡æŠ€æœ¯æ–‡æ¡£ï¼ˆæœ¬æ–‡ä»¶ï¼‰
â””â”€â”€ start.sh                 # ä¸€é”®å¯åŠ¨è„šæœ¬
```

---

## æ ¸å¿ƒä¸šåŠ¡æµç¨‹

### ç”¨æˆ·æ—…ç¨‹ï¼ˆHappy Pathï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é¦–æ¬¡è®¿é—®/å·²é‡ç½®  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. SETUP SCREEN (åˆæ¬¡é…ç½®)           â”‚
â”‚    - é€‰æ‹©éš¾åº¦ (Beginner/Int/Adv)    â”‚
â”‚    - è¾“å…¥è€ƒè¯•æ—¥æœŸ                    â”‚
â”‚    - ä¿å­˜åˆ° localStorage             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. GENERATING (åå°ç”Ÿæˆé¢˜ç›®)         â”‚
â”‚    - è°ƒç”¨ /generate-session API     â”‚
â”‚    - æ˜¾ç¤ºåŠ è½½åŠ¨ç”»                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. EXAM SCREEN (é™é»˜è€ƒè¯•æ¨¡å¼)        â”‚
â”‚    - åˆ†å±æ˜¾ç¤º: å·¦ä¾§æ–‡ç« ï¼Œå³ä¾§é¢˜ç›®    â”‚
â”‚    - æ— å³æ—¶åé¦ˆï¼ˆçº¯æµ‹è¯•ç¯å¢ƒï¼‰        â”‚
â”‚    - ç”¨æˆ·å®Œæˆ 3 é“é¢˜åç‚¹å‡» SUBMIT    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. ANALYZING (åˆ†æé”™é¢˜)              â”‚
â”‚    - è°ƒç”¨ /analyze-mistakes API     â”‚
â”‚    - å¹¶è¡Œå¤„ç†æ¯é“é”™é¢˜ï¼ˆasyncioï¼‰     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚ æœ‰é”™é¢˜ï¼Ÿ â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â”´â”€â”€â”€â”€â”
    â”‚   æ˜¯    â”‚   å¦
    â–¼         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ REDEMPTION     â”‚  â”‚ SUMMARY        â”‚
â”‚ (é”™é¢˜è®¢æ­£å¾ªç¯)  â”‚  â”‚ (ç›´æ¥è·³åˆ°æ€»ç»“)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

ã€REDEMPTION FLOW è¯¦ç»†æµç¨‹ã€‘
å¯¹äºæ¯é“é”™é¢˜:
1. æ˜¾ç¤ºé¢˜ç›® + ç”¨æˆ·çš„é”™è¯¯ç­”æ¡ˆï¼ˆåˆ’çº¿åˆ é™¤ + çº¢è‰²æ ‡è®°ï¼‰
2. æ˜¾ç¤º Coach Hintï¼ˆä¸é€éœ²æ­£ç¡®ç­”æ¡ˆï¼Œåªæ”»å‡»é”™è¯¯é€»è¾‘ï¼‰
3. ç”¨æˆ·é‡æ–°é€‰æ‹©ç­”æ¡ˆ:
   - æ­£ç¡® â†’ ç»¿è‰²é—ªçƒ â†’ "Nailed it" â†’ ä¸‹ä¸€é¢˜
   - é”™è¯¯ â†’ çº¢è‰²é—ªçƒ â†’ æ˜¾ç¤ºå®Œæ•´è§£æï¼ˆæ­ç¤ºæ­£ç¡®ç­”æ¡ˆï¼‰â†’ ä¸‹ä¸€é¢˜
4. å¾ªç¯ç›´åˆ°æ‰€æœ‰é”™é¢˜å¤„ç†å®Œæ¯•

         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. SUMMARY SCREEN (èƒœåˆ©ç•Œé¢)         â”‚
â”‚    - æ˜¾ç¤ºåŸå§‹åˆ†æ•° vs æœ€ç»ˆæŒæ¡åº¦      â”‚
â”‚    - å±•ç¤ºè¯†åˆ«çš„é™·é˜±ç±»å‹              â”‚
â”‚    - Coach æ¿€åŠ±æ¶ˆæ¯                  â”‚
â”‚    - æ›´æ–° Streakï¼ˆè¿ç»­å¤©æ•°ï¼‰         â”‚
â”‚    - ã€DONE FOR TODAYã€‘æŒ‰é’®          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 6. HOME SCREEN (è¿”å›é¦–é¡µ)            â”‚
â”‚    - æ˜¾ç¤ºå½“å‰ Streak                 â”‚
â”‚    - æ˜¾ç¤ºå·²ä¿å­˜çš„è®¾ç½®                â”‚
â”‚    - ã€START DRILLã€‘æŒ‰é’®ï¼ˆæ‰‹åŠ¨å¼€å§‹ï¼‰ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## API è®¾è®¡ï¼ˆåç«¯æ¥å£ï¼‰

### 1. ç”Ÿæˆä¼šè¯ - `POST /generate-session`

**è¯·æ±‚ä½“**:
```json
{
  "difficulty": "Intermediate",
  "exam_date": "2025-12-20"
}
```

**å“åº”ä½“**:
```json
{
  "session_id": "uuid-string",
  "passage": {
    "title": "The Economic Impact of Bees",
    "text": "æ–‡ç« æ­£æ–‡å†…å®¹ï¼ˆ150-200è¯ï¼‰..."
  },
  "questions": [
    {
      "id": 101,
      "text": "The primary purpose of the passage is...",
      "options": {
        "A": "é€‰é¡¹æ–‡æœ¬",
        "B": "é€‰é¡¹æ–‡æœ¬",
        "C": "é€‰é¡¹æ–‡æœ¬",
        "D": "é€‰é¡¹æ–‡æœ¬",
        "E": "é€‰é¡¹æ–‡æœ¬"
      },
      "correct_option": "C"
    }
    // ... 3é“é¢˜
  ]
}
```

**å…³é”®å®ç°**:
- æ ¹æ® `difficulty` è°ƒæ•´æ–‡ç« å¤æ‚åº¦ï¼ˆè¯æ±‡å¯†åº¦ã€å¥å­ç»“æ„ï¼‰
- é¢˜ç›®ç±»å‹å›ºå®š: Q1 ä¸»æ—¨é¢˜, Q2 æ¨ç†é¢˜, Q3 ç»†èŠ‚é¢˜
- å¹²æ‰°é€‰é¡¹ä½¿ç”¨æ ‡å‡† GRE é™·é˜±ï¼ˆOut of Scope, Distortion, Extreme Languageï¼‰

---

### 2. åˆ†æé”™è¯¯ - `POST /analyze-mistakes`

**è¯·æ±‚ä½“**:
```json
{
  "session_id": "uuid-string",
  "answers": {
    "101": "A",
    "102": "B",
    "103": "C"
  }
}
```

**å“åº”ä½“**:
```json
[
  {
    "question_id": 101,
    "user_mistake_diagnosis": {
      "trap_type": "Out of Scope",
      "hint_for_retry": "ä½ é€‰äº† Aã€‚çœ‹ç¬¬ 12 è¡Œã€‚ä½œè€…æåˆ°äº† 'prices'ï¼Œä½†ä»–æœ‰å°†å®ƒä»¬ä¸ 'quality' è”ç³»èµ·æ¥å—ï¼Ÿæ²¡æœ‰ã€‚ä½ åšäº†ä¸€ä¸ªå‡è®¾ã€‚",
      "full_explanation": "æ­£ç¡®ç­”æ¡ˆæ˜¯ Dã€‚B é”™è¯¯æ˜¯å› ä¸º [åŸå› ]ã€‚D æ­£ç¡®æ˜¯å› ä¸º [æ–‡æœ¬è¯æ®]ã€‚"
    }
  }
  // ... åªè¿”å›é”™é¢˜çš„åˆ†æ
]
```

**å…³é”®å®ç°**:
- **å¹¶è¡Œ LLM è°ƒç”¨**: ä½¿ç”¨ `asyncio.gather()` åŒæ—¶å¤„ç†æ‰€æœ‰é”™é¢˜
- **é˜²å‰§é€é˜²ç«å¢™**: `hint_for_retry` å­—æ®µ**ç»ä¸é€éœ²**æ­£ç¡®ç­”æ¡ˆï¼Œä»…æŒ‡å‡ºé”™è¯¯é€»è¾‘
- **ä¸¤æ¬¡æœºä¼šè§„åˆ™**: ç¬¬äºŒæ¬¡é”™è¯¯åæ‰æ˜¾ç¤º `full_explanation`

**ä»£ç ç¤ºä¾‹** (backend/main.py):
```python
# å¹¶è¡Œç”Ÿæˆé”™é¢˜åˆ†æ
analysis_tasks = [
    analyze_mistake(
        passage=session.passage,
        question=mistake["question"],
        user_wrong_answer=mistake["user_answer"],
        correct_answer=mistake["correct_answer"]
    )
    for mistake in mistakes
]
diagnoses = await asyncio.gather(*analysis_tasks)
```

---

### 3. ç”Ÿæˆæ€»ç»“ - `POST /session-summary`

**è¯·æ±‚ä½“**:
```json
{
  "session_id": "uuid-string",
  "original_score": "1/3",
  "final_mastery": "3/3",
  "traps_identified": ["Out of Scope", "Distortion"],
  "exam_date": "2025-12-20"
}
```

**å“åº”ä½“**:
```json
{
  "original_score": "1/3",
  "final_mastery": "3/3",
  "traps_identified": ["Out of Scope", "Distortion"],
  "coach_message": {
    "headline": "Good recovery.",
    "body": "ä½ ä» 1/3 å¼€å§‹ï¼Œæœ€ç»ˆ 3/3ã€‚ä½ æ‰è¿›äº† Out of Scope, Distortion é™·é˜±â€”â€”ç»å…¸é”™è¯¯ã€‚ä½†ä½ ä¿®æ­£äº†å®ƒä»¬ã€‚è¿™å°±æ˜¯è¿›æ­¥ã€‚è€ƒè¯•æ—¥æœŸ: 2025-12-20ã€‚æ˜å¤©ç»§ç»­ã€‚"
  }
}
```

**å…³é”®å®ç°**:
- Coach æ¶ˆæ¯é£æ ¼: "åŸå­ä¹ æƒ¯"å¼æ¿€åŠ±ï¼ˆå¼ºè°ƒä¸€è‡´æ€§ > å¼ºåº¦ï¼‰
- å¼•ç”¨è€ƒè¯•æ—¥æœŸï¼Œåˆ›é€ ç´§è¿«æ„Ÿ

---

## å‰ç«¯çŠ¶æ€ç®¡ç†

### SessionContext å…¨å±€çŠ¶æ€

**çŠ¶æ€é˜¶æ®µ (PHASES)**:
```javascript
{
  HOME: 'HOME',           // é¦–é¡µï¼ˆå·²é…ç½®ç”¨æˆ·ï¼‰
  SETUP: 'SETUP',         // åˆæ¬¡é…ç½®
  GENERATING: 'GENERATING', // åå°ç”Ÿæˆé¢˜ç›®
  EXAM: 'EXAM',           // è€ƒè¯•æ¨¡å¼
  ANALYZING: 'ANALYZING', // åˆ†æé”™é¢˜
  REDEMPTION: 'REDEMPTION', // é”™é¢˜è®¢æ­£
  SUMMARY: 'SUMMARY'      // æ€»ç»“
}
```

**æ ¸å¿ƒçŠ¶æ€å˜é‡**:
```javascript
// ä¼šè¯æ•°æ®
sessionId         // å½“å‰ä¼šè¯ UUID
passage           // æ–‡ç« å¯¹è±¡ {title, text}
questions         // é¢˜ç›®æ•°ç»„
difficulty        // éš¾åº¦çº§åˆ«
examDate          // è€ƒè¯•æ—¥æœŸ

// ç­”æ¡ˆè¿½è¸ª
examAnswers       // è€ƒè¯•ç­”æ¡ˆ {questionId: option}
redemptionAnswers // è®¢æ­£ç­”æ¡ˆ {questionId: option}

// é”™é¢˜ç®¡ç†
mistakes          // é”™é¢˜è¯Šæ–­æ•°ç»„
currentMistakeIndex // å½“å‰å¤„ç†çš„é”™é¢˜ç´¢å¼•

// Streak è¿½è¸ª
streak            // è¿ç»­å¤©æ•°
lastSessionDate   // ä¸Šæ¬¡ä¼šè¯æ—¥æœŸ

// ç”¨æˆ·é…ç½®ï¼ˆæŒä¹…åŒ–ï¼‰
hasConfigured     // æ˜¯å¦å·²é…ç½®
savedDifficulty   // å·²ä¿å­˜éš¾åº¦
savedExamDate     // å·²ä¿å­˜è€ƒè¯•æ—¥æœŸ
```

**å…³é”®å‡½æ•°**:
```javascript
saveConfiguration(difficulty, examDate)  // ä¿å­˜é…ç½®åˆ° localStorage
updateStreak()                           // æ›´æ–°è¿ç»­å¤©æ•°
calculateScores()                        // è®¡ç®—åˆ†æ•°
resetSession()                           // é‡ç½®ä¼šè¯ï¼ˆä¿ç•™é…ç½®ï¼‰
```

---

## æ•°æ®æŒä¹…åŒ–ç­–ç•¥

### localStorage å­˜å‚¨å†…å®¹

| é”®å | å€¼ç±»å‹ | æè¿° |
|------|--------|------|
| `gre_configured` | boolean | ç”¨æˆ·æ˜¯å¦å·²å®Œæˆé¦–æ¬¡é…ç½® |
| `gre_difficulty` | string | å·²ä¿å­˜çš„éš¾åº¦çº§åˆ« |
| `gre_exam_date` | string (ISO) | å·²ä¿å­˜çš„è€ƒè¯•æ—¥æœŸ |
| `gre_streak` | number | è¿ç»­è®­ç»ƒå¤©æ•° |
| `gre_last_session_date` | string (ISO) | ä¸Šæ¬¡å®Œæˆä¼šè¯çš„æ—¥æœŸ |

**Streak è®¡ç®—é€»è¾‘**:
```javascript
const today = new Date().toISOString().split('T')[0];
const yesterday = new Date(Date.now() - 86400000).toISOString().split('T')[0];

if (lastSessionDate === today) {
  // åŒä¸€å¤©ï¼Œä¸å˜
} else if (lastSessionDate === yesterday) {
  // è¿ç»­å¤©ï¼Œ+1
  newStreak = streak + 1;
} else {
  // ä¸­æ–­ï¼Œé‡ç½®ä¸º 1
  newStreak = 1;
}
```

### æ•°æ®é‡ç½®åŠŸèƒ½

ç”¨æˆ·å¯é€šè¿‡ **Settings æ¨¡æ€æ¡†** å®Œå…¨æ¸…é™¤æ‰€æœ‰æ•°æ®:
- æ¸…ç©ºæ‰€æœ‰ localStorage é”®
- åˆ·æ–°é¡µé¢ï¼Œå›åˆ°åˆæ¬¡è®¿é—®çŠ¶æ€
- ä½ç½®:
  - Setup Screen å³ä¸Šè§’é½¿è½®æŒ‰é’®
  - Summary Screen "Settings" æŒ‰é’®

---

## UI/UX è®¾è®¡è§„èŒƒ

### é…è‰²æ–¹æ¡ˆï¼ˆæ•™è‚²ä¸»é¢˜ï¼‰

```css
/* Navy Blue Base - ä¸“ä¸šä½†å‹å¥½ */
--bg-primary: #0f172a;      /* ä¸»èƒŒæ™¯ */
--bg-secondary: #1e293b;    /* å¡ç‰‡èƒŒæ™¯ */
--bg-tertiary: #334155;     /* æ‚¬åœçŠ¶æ€ */

/* æ–‡æœ¬é¢œè‰² */
--text-primary: #f8fafc;    /* ä¸»æ–‡æœ¬ï¼ˆç™½è‰²ï¼‰ */
--text-secondary: #94a3b8;  /* æ¬¡è¦æ–‡æœ¬ï¼ˆç°è‰²ï¼‰ */

/* åŠŸèƒ½è‰² */
--accent-primary: #3b82f6;    /* è“è‰² - ä¸»è¦æ“ä½œï¼ˆä¿¡ä»»ã€æ•™è‚²ï¼‰*/
--accent-secondary: #8b5cf6;  /* ç´«è‰² - æ¬¡è¦æ“ä½œï¼ˆåˆ›æ„ã€è¶£å‘³ï¼‰*/
--accent-green: #10b981;      /* ç»¿è‰² - æˆåŠŸçŠ¶æ€ */
--accent-red: #ef4444;        /* çº¢è‰² - é”™è¯¯çŠ¶æ€ */
--accent-yellow: #f59e0b;     /* é»„è‰² - è­¦å‘Š/é«˜äº® */
```

### å“åº”å¼æ–­ç‚¹

```css
/* Mobile First */
é»˜è®¤: < 640px
sm: 640px
md: 768px
lg: 1024px    /* åˆ†å±é˜…è¯»è§†å›¾çš„æœ€å°å®½åº¦ */
xl: 1280px
```

### å…³é”® UI ç»„ä»¶

**1. åˆ†å±é˜…è¯»è§†å›¾** (Exam/Redemption)
```html
<div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
  <div>æ–‡ç« </div>
  <div>é¢˜ç›®/Coach æç¤º</div>
</div>
```

**2. Coach Boxï¼ˆæ•™ç»ƒæç¤ºæ¡†ï¼‰**
- æ©™è‰²è¾¹æ¡† + åŠé€æ˜èƒŒæ™¯ â†’ Hintï¼ˆä¸å‰§é€ï¼‰
- çº¢è‰²è¾¹æ¡† + åŠé€æ˜èƒŒæ™¯ â†’ Full Explanationï¼ˆæ­ç¤ºç­”æ¡ˆï¼‰
- ç»¿è‰²è¾¹æ¡† + åŠé€æ˜èƒŒæ™¯ â†’ Successï¼ˆç­”å¯¹äº†ï¼‰

**3. æŒ‰é’®çŠ¶æ€**
- Primary: è“è‰²ï¼ˆ#3b82f6ï¼‰ - ä¸»è¦æ“ä½œ
- Secondary: ç´«è‰²ï¼ˆ#8b5cf6ï¼‰ - æ¬¡è¦æ“ä½œ
- Success: ç»¿è‰²ï¼ˆ#10b981ï¼‰ - "Done for Today"
- Danger: çº¢è‰²ï¼ˆ#ef4444ï¼‰ - é‡ç½®æ•°æ®

---

## å¼€å‘ç¯å¢ƒé…ç½®

### ä¾èµ–å®‰è£…

**åç«¯**:
```bash
cd backend
pip install -r requirements.txt

# ä¾èµ–åˆ—è¡¨:
# - fastapi==0.115.5
# - uvicorn[standard]==0.32.1
# - pydantic==2.10.3
# - python-multipart==0.0.18
```

**å‰ç«¯**:
```bash
cd frontend
npm install

# ä¸»è¦ä¾èµ–:
# - react: ^19.2.0
# - vite: ^7.2.4
# - tailwindcss: ^3.4.1
# - lucide-react: ^0.xxx
```

### å¯åŠ¨å¼€å‘æœåŠ¡å™¨

**æ–¹å¼ä¸€: åˆ†åˆ«å¯åŠ¨**
```bash
# Terminal 1 - åç«¯
cd backend
python main.py
# è¿è¡Œåœ¨ http://localhost:8000

# Terminal 2 - å‰ç«¯
cd frontend
npm run dev
# è¿è¡Œåœ¨ http://localhost:5173
```

**æ–¹å¼äºŒ: ä¸€é”®å¯åŠ¨**
```bash
chmod +x start.sh
./start.sh
```

### æµ‹è¯• API

```bash
# å¥åº·æ£€æŸ¥
curl http://localhost:8000/

# ç”Ÿæˆä¼šè¯
curl -X POST http://localhost:8000/generate-session \
  -H 'Content-Type: application/json' \
  -d '{"difficulty": "Intermediate", "exam_date": "2025-12-20"}'
```

---

## å½“å‰å¼€å‘è¿›åº¦

### âœ… å·²å®ŒæˆåŠŸèƒ½

**åç«¯ (100%)**:
- [x] FastAPI åŸºç¡€æ¶æ„
- [x] Pydantic æ•°æ®æ¨¡å‹ï¼ˆä¸¥æ ¼ç±»å‹éªŒè¯ï¼‰
- [x] 3 ä¸ªæ ¸å¿ƒ API ç«¯ç‚¹
- [x] Mock LLM æœåŠ¡ï¼ˆ3 ä¸ªéš¾åº¦çº§åˆ«çš„æ–‡ç« ï¼‰
- [x] å¹¶è¡Œé”™é¢˜åˆ†æï¼ˆasyncio.gatherï¼‰
- [x] CORS é…ç½®ï¼ˆæ”¯æŒå‰ç«¯è°ƒç”¨ï¼‰

**å‰ç«¯ (100%)**:
- [x] React + Vite é¡¹ç›®åˆå§‹åŒ–
- [x] Tailwind CSS v3 é…ç½®
- [x] SessionContext å…¨å±€çŠ¶æ€ç®¡ç†
- [x] 6 ä¸ªæ ¸å¿ƒç•Œé¢ç»„ä»¶:
  - [x] HomeScreenï¼ˆå·²é…ç½®ç”¨æˆ·é¦–é¡µï¼‰
  - [x] SetupScreenï¼ˆåˆæ¬¡é…ç½®ï¼‰
  - [x] ExamScreenï¼ˆè€ƒè¯•æ¨¡å¼ï¼‰
  - [x] RedemptionScreenï¼ˆé”™é¢˜è®¢æ­£å¾ªç¯ï¼‰
  - [x] SummaryScreenï¼ˆæ€»ç»“ç•Œé¢ï¼‰
  - [x] SettingsScreenï¼ˆè®¾ç½®/é‡ç½®ï¼‰
- [x] localStorage æŒä¹…åŒ–
- [x] Streak è¿½è¸ªç³»ç»Ÿ
- [x] å®Œæ•´ç”¨æˆ·æµç¨‹ï¼ˆä»é…ç½®åˆ°æ€»ç»“ï¼‰

**è®¾è®¡ (100%)**:
- [x] Navy Blue æ•™è‚²ä¸»é¢˜é…è‰²
- [x] ç§»åŠ¨ä¼˜å…ˆå“åº”å¼å¸ƒå±€
- [x] åˆ†å±é˜…è¯»è§†å›¾
- [x] åŠ è½½åŠ¨ç”»
- [x] é”™è¯¯çŠ¶æ€å¤„ç†

### ğŸš§ å·²çŸ¥é—®é¢˜/å¾…ä¼˜åŒ–

**é«˜ä¼˜å…ˆçº§**:
1. **LLM é›†æˆ**: å½“å‰ä½¿ç”¨ Mock æ•°æ®ï¼Œéœ€æ›¿æ¢ä¸ºçœŸå® OpenAI/Anthropic API
2. **åç«¯æŒä¹…åŒ–**: å†…å­˜å­˜å‚¨ä¼šåœ¨æœåŠ¡å™¨é‡å¯æ—¶ä¸¢å¤±ï¼Œéœ€æ·»åŠ æ•°æ®åº“ï¼ˆPostgreSQL/MongoDBï¼‰
3. **é”™è¯¯å¤„ç†**: éœ€è¦æ›´å‹å¥½çš„é”™è¯¯æç¤ºï¼ˆç½‘ç»œå¤±è´¥ã€API è¶…æ—¶ç­‰ï¼‰

**ä¸­ä¼˜å…ˆçº§**:
4. **é¢˜ç›®å¤šæ ·æ€§**: å½“å‰æ¯ä¸ªéš¾åº¦åªæœ‰ 1 ç¯‡æ–‡ç« ï¼Œéœ€æ‰©å±•é¢˜åº“
5. **ç”¨æˆ·è®¤è¯**: æ— è´¦å·ç³»ç»Ÿï¼Œæ•°æ®ä»…å­˜æœ¬åœ°æµè§ˆå™¨
6. **æ€§èƒ½ä¼˜åŒ–**: å¤§é‡ useEffect ä¾èµ–å¯ä¼˜åŒ–

**ä½ä¼˜å…ˆçº§**:
7. **å†å²è®°å½•**: æ— æ³•æŸ¥çœ‹è¿‡å¾€ä¼šè¯
8. **è¿›åº¦åˆ†æ**: ç¼ºå°‘é•¿æœŸæ•°æ®è¿½è¸ªï¼ˆå¼±é¡¹åˆ†æã€æ­£ç¡®ç‡è¶‹åŠ¿ï¼‰
9. **å¤šè¯­è¨€æ”¯æŒ**: ä»…æ”¯æŒè‹±æ–‡ç•Œé¢

---

## ä¸‹ä¸€æ­¥å¼€å‘è®¡åˆ’

### Phase 2: çœŸå® LLM é›†æˆï¼ˆ2-3 å¤©ï¼‰

**ä»»åŠ¡**:
1. æ³¨å†Œ OpenAI/Anthropic è´¦å·ï¼Œè·å– API Key
2. æ›´æ–° `backend/llm_service.py`:
   - æ›¿æ¢ `generate_passage_and_questions()` ä¸ºçœŸå® API è°ƒç”¨
   - æ›¿æ¢ `analyze_mistake()` ä¸ºçœŸå® API è°ƒç”¨
   - æ›¿æ¢ `generate_summary()` ä¸ºçœŸå® API è°ƒç”¨
3. æ·»åŠ ç¯å¢ƒå˜é‡ç®¡ç†ï¼ˆ`.env` æ–‡ä»¶ï¼Œä¸æäº¤åˆ° Gitï¼‰
4. å®ç° API é€Ÿç‡é™åˆ¶å¤„ç†
5. ä¸‰ä¸ªLLMè§’è‰²çš„Prompt Engineeringç”±Mikeè´Ÿè´£å³å¯

**ä»£ç ç¤ºä¾‹**:
```python
# backend/llm_service.py
import openai
import os

openai.api_key = os.getenv("OPENAI_API_KEY")

async def generate_passage_and_questions(difficulty):
    response = await openai.ChatCompletion.acreate(
        model="gpt-4",
        messages=[
            {"role": "system", "content": CONTENT_GENERATOR_PROMPT},
            {"role": "user", "content": f"Generate {difficulty} passage"}
        ]
    )
    # è§£æ JSON å“åº”...
```

### Phase 3: æ•°æ®åº“é›†æˆï¼ˆ3-5 å¤©ï¼‰

**æŠ€æœ¯é€‰å‹**:
- **PostgreSQL** (æ¨è) - å…³ç³»å‹ï¼Œæˆç†Ÿç¨³å®š
- æˆ– **MongoDB** - NoSQLï¼Œçµæ´»æ‰©å±•

**æ•°æ®æ¨¡å‹è®¾è®¡**:
```
Users
- id (UUID)
- email
- created_at

Sessions
- id (UUID)
- user_id (FK)
- difficulty
- exam_date
- original_score
- final_mastery
- traps_identified
- created_at

Questions
- id
- session_id (FK)
- question_text
- options (JSON)
- correct_option
- user_answer
- is_correct
```

**è¿ç§»è·¯å¾„**:
1. æ·»åŠ  SQLAlchemy / Motor (MongoDB)
2. æ›´æ–° `backend/main.py` ä¸­çš„ä¼šè¯å­˜å‚¨é€»è¾‘
3. å®ç°ç”¨æˆ·è®¤è¯ï¼ˆJWT Tokenï¼‰
4. å‰ç«¯æ·»åŠ ç™»å½•/æ³¨å†Œç•Œé¢

### Phase 4: æ•°æ®åˆ†æåŠŸèƒ½ï¼ˆ5-7 å¤©ï¼‰

**æ–°å¢åŠŸèƒ½**:
- å†å²ä¼šè¯åˆ—è¡¨
- é”™è¯¯ç‡ç»Ÿè®¡ï¼ˆæŒ‰é™·é˜±ç±»å‹ï¼‰
- æ­£ç¡®ç‡è¶‹åŠ¿å›¾
- è–„å¼±ä¸»é¢˜è¯†åˆ«

---

## è°ƒè¯•æŠ€å·§

### å‰ç«¯è°ƒè¯•

**æŸ¥çœ‹ localStorage**:
```javascript
// æµè§ˆå™¨æ§åˆ¶å°
localStorage.getItem('gre_streak')
localStorage.getItem('gre_configured')

// æ¸…ç©ºæ‰€æœ‰æ•°æ®
localStorage.clear()
```

**React DevTools**:
- å®‰è£… Chrome æ‰©å±•: React Developer Tools
- æŸ¥çœ‹ SessionContext çŠ¶æ€æ ‘

**æŸ¥çœ‹ç½‘ç»œè¯·æ±‚**:
- Chrome DevTools â†’ Network æ ‡ç­¾
- ç­›é€‰ Fetch/XHR è¯·æ±‚
- æ£€æŸ¥ `/generate-session` å“åº”ä½“

### åç«¯è°ƒè¯•

**æŸ¥çœ‹æ—¥å¿—**:
```bash
# Uvicorn è‡ªåŠ¨æ‰“å°è¯·æ±‚æ—¥å¿—
INFO:     127.0.0.1:58492 - "POST /generate-session HTTP/1.1" 200 OK
```

**æ‰‹åŠ¨æµ‹è¯• API**:
```bash
# ä½¿ç”¨ curl
curl -X POST http://localhost:8000/generate-session \
  -H 'Content-Type: application/json' \
  -d '{"difficulty": "Beginner", "exam_date": "2025-12-20"}' | jq
```

**Python æ–­ç‚¹è°ƒè¯•**:
```python
# åœ¨ä»£ç ä¸­æ’å…¥æ–­ç‚¹
import pdb; pdb.set_trace()
```

---

## Git å·¥ä½œæµï¼ˆå›¢é˜Ÿåä½œï¼‰

### åˆ†æ”¯ç­–ç•¥

```
main         # ç”Ÿäº§ç¯å¢ƒï¼ˆç¨³å®šç‰ˆæœ¬ï¼‰
  â”œâ”€ dev     # å¼€å‘ç¯å¢ƒï¼ˆé›†æˆåˆ†æ”¯ï¼‰
      â”œâ”€ feature/llm-integration      # åŠŸèƒ½åˆ†æ”¯
      â”œâ”€ feature/database-setup       # åŠŸèƒ½åˆ†æ”¯
      â””â”€ fix/redemption-bug           # Bug ä¿®å¤åˆ†æ”¯
```

### æäº¤è§„èŒƒ

```bash
# æ ¼å¼: <type>(<scope>): <subject>

# ç±»å‹:
feat:     æ–°åŠŸèƒ½
fix:      Bug ä¿®å¤
docs:     æ–‡æ¡£æ›´æ–°
style:    ä»£ç æ ¼å¼ï¼ˆä¸å½±å“é€»è¾‘ï¼‰
refactor: é‡æ„ï¼ˆä¸æ”¹å˜å¤–éƒ¨è¡Œä¸ºï¼‰
test:     æµ‹è¯•ç›¸å…³
chore:    æ„å»º/å·¥å…·é“¾æ›´æ–°

# ç¤ºä¾‹:
git commit -m "feat(backend): integrate OpenAI API for passage generation"
git commit -m "fix(frontend): resolve circular JSON error in SetupScreen"
git commit -m "docs: update README_CN with API documentation"
```

### Pull Request æµç¨‹

1. ä» `dev` åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
2. å®Œæˆå¼€å‘ + è‡ªæµ‹é€šè¿‡
3. æäº¤ PR åˆ° `dev` åˆ†æ”¯
4. Code Reviewï¼ˆè‡³å°‘ 1 äººæ‰¹å‡†ï¼‰
5. åˆå¹¶ååˆ é™¤åŠŸèƒ½åˆ†æ”¯

---

## å¸¸è§é—®é¢˜ (FAQ)

### Q1: å‰ç«¯æ— æ³•è¿æ¥åç«¯ï¼Ÿ
**A**: æ£€æŸ¥:
1. åç«¯æ˜¯å¦åœ¨è¿è¡Œï¼ˆ`http://localhost:8000`ï¼‰
2. CORS é…ç½®æ˜¯å¦æ­£ç¡®ï¼ˆ`main.py` ç¬¬ 30 è¡Œï¼‰
3. å‰ç«¯ API åœ°å€æ˜¯å¦æ­£ç¡®ï¼ˆ`api.js` ç¬¬ 6 è¡Œï¼‰

### Q2: Tailwind æ ·å¼ä¸ç”Ÿæ•ˆï¼Ÿ
**A**:
```bash
# ç¡®è®¤ tailwind.config.js çš„ content è·¯å¾„æ­£ç¡®
content: [
  "./index.html",
  "./src/**/*.{js,ts,jsx,tsx}",
]

# é‡å¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

### Q3: localStorage æ•°æ®ä¸¢å¤±ï¼Ÿ
**A**:
- localStorage æ˜¯åŸºäºåŸŸåçš„ï¼Œåˆ‡æ¢ `localhost` â†” `127.0.0.1` ä¼šå¯¼è‡´æ•°æ®éš”ç¦»
- ä½¿ç”¨éšèº«æ¨¡å¼ä¼šåœ¨å…³é—­æ—¶æ¸…ç©ºæ•°æ®
- æ¸…ç†æµè§ˆå™¨ç¼“å­˜ä¼šåˆ é™¤ localStorage

### Q4: å¦‚ä½•æ¨¡æ‹Ÿä¸åŒçš„ Streak çŠ¶æ€ï¼Ÿ
**A**:
```javascript
// æµè§ˆå™¨æ§åˆ¶å°
localStorage.setItem('gre_streak', '7')
localStorage.setItem('gre_last_session_date', '2025-12-03')
location.reload()
```

### Q5: åç«¯è¿”å› 404 é”™è¯¯ï¼Ÿ
**A**: æ£€æŸ¥è¯·æ±‚è·¯å¾„æ˜¯å¦æ­£ç¡®:
- âœ… `/generate-session` (æ­£ç¡®)
- âŒ `/api/generate-session` (é”™è¯¯)